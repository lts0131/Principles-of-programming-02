webpackJsonp([1],{"+eDr":function(e,t){},"7lMO":function(e,t){},HTdF:function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("7+uW"),i={name:"App",data:function(){return{formLabelWidth:"110px",dialog:!1,loading:!1,form:{id:null,user_name:null,password:null,user_type:null,user_nickname:null,membership_grade:null}}},methods:{determine_user:function(){var e=this;this.axios.post("/edit_user",this.form).then(function(t){e.dialog=!1}).catch(function(e){console.log(e.data)})},cancelForm:function(){this.dialog=!1},logout:function(){this.$cookies.remove("user"),this.$router.push({path:"/"})},editor_login:function(){this.form=this.$cookies.get("user"),this.dialog=!0},kill:function(){this.axios.post("/kill").then(function(e){console.log(e.data)}).catch(function(e){console.log(e.data)})}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("div",{staticClass:"header-div"},[o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.kill()}}})],1),e._v(" "),o("div",{staticClass:"header-div"},[o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-switch-button"},on:{click:function(t){return e.logout()}}})],1),e._v(" "),o("div",{staticClass:"header-div"},[o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.editor_login()}}})],1),e._v(" "),o("router-view"),e._v(" "),o("el-drawer",{ref:"drawer",attrs:{title:"editor login",visible:e.dialog,direction:"ltr","custom-class":"demo-drawer"},on:{"update:visible":function(t){e.dialog=t}}},[o("div",{staticClass:"demo-drawer__content"},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"user name","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off",disabled:""},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"password","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"user type","label-width":e.formLabelWidth,disabled:""}},[o("el-select",{staticStyle:{width:"200px"},model:{value:e.form.user_type,callback:function(t){e.$set(e.form,"user_type",t)},expression:"form.user_type"}},[o("el-option",{attrs:{label:"user",value:"user"}}),e._v(" "),o("el-option",{attrs:{label:"admin",value:"admin"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"member grade","label-width":e.formLabelWidth}},[o("el-select",{staticStyle:{width:"200px"},model:{value:e.form.membership_grade,callback:function(t){e.$set(e.form,"membership_grade",t)},expression:"form.membership_grade"}},[o("el-option",{attrs:{label:"admin",value:"0"}}),e._v(" "),o("el-option",{attrs:{label:"1",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"2",value:"2"}}),e._v(" "),o("el-option",{attrs:{label:"3",value:"3"}})],1)],1)],1),e._v(" "),o("div",{staticClass:"demo-drawer__footer"},[o("el-button",{on:{click:e.cancelForm}},[e._v("cancel")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.determine_user}},[e._v("determine")])],1)],1)])],1)},staticRenderFns:[]};var s=o("VU/8")(i,l,!1,function(e){o("7lMO"),o("it3O")},null,null).exports,r=o("/ocq"),n={name:"login",data:function(){return{form:{username:"",password:""}}},methods:{onSubmit:function(){var e=this;this.axios.post("/login",this.form).then(function(t){"admin"==t.data[0].user_type?(e.$cookies.set("user",t.data[0]),console.log(e.$cookies),e.$router.push({path:"/admin"})):(e.$cookies.set("user",t.data[0]),console.log(e.$cookies),e.$router.push({path:"/user"}))}).catch(function(e){console.log(e.data)})}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e._m(0),e._v(" "),o("form",[o("h3",[e._v("Video System")]),e._v(" "),o("label",{attrs:{for:"username"}},[e._v("Username")]),e._v(" "),o("el-input",{attrs:{type:"text",placeholder:"Username",id:"username"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),e._v(" "),o("label",{attrs:{for:"password"}},[e._v("Password")]),e._v(" "),o("el-input",{attrs:{type:"password",placeholder:"Password",id:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),o("button",{on:{click:e.onSubmit}},[e._v("Log In")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"background"},[t("div",{staticClass:"shape"}),this._v(" "),t("div",{staticClass:"shape"})])}]};var c=o("VU/8")(n,d,!1,function(e){o("HTdF")},"data-v-4eb40492",null).exports,u=o("mtWM"),m={name:"admin",data:function(){return{formLabelWidth:"110px",form:{},form_video:{},dialog_user:!1,dialog_video:!1,sum_num:"",user_tableData:[],video_tableData:[],top5_customers:[],user_table_show:!0,video_table_show:!1,revenue_table_show:!1,graph_show:!1,src1:"",src2:""}},mounted:function(){this.getQuery()},methods:{getQuery:function(){var e=this;this.axios.post("/get_all_video",this.form).then(function(t){e.video_tableData=t.data}).catch(function(e){console.log(e.data)}),this.axios.post("/get_all_user",this.form).then(function(t){e.user_tableData=t.data}).catch(function(e){console.log(e.data)}),this.axios.post("/top10_file",this.form).then(function(t){e.src1=t.data.base64_str}).catch(function(e){console.log(e.data)}),this.axios.post("/top5_customers",this.form).then(function(t){e.src2=t.data.base64_str}).catch(function(e){console.log(e.data)}),this.axios.post("/sum_num",this.form).then(function(t){e.sum_num=t.data[0].sum_num}).catch(function(e){console.log(e.data)})},handleSelect:function(e,t){1==e?(this.user_table_show=!0,this.video_table_show=!1,this.revenue_table_show=!1,this.graph_show=!1):2==e?(this.user_table_show=!1,this.video_table_show=!0,this.revenue_table_show=!1,this.graph_show=!1):4==e?(this.user_table_show=!1,this.video_table_show=!1,this.revenue_table_show=!0,this.graph_show=!1):3==e&&(this.user_table_show=!1,this.video_table_show=!1,this.revenue_table_show=!1,this.graph_show=!0)},editor_user:function(e){this.form=e,this.dialog_user=!0},delete_row_user:function(e){var t=this;this.axios.post("/delete_user",e).then(function(e){t.getQuery()}).catch(function(e){console.log(e.data)})},delete_row_video:function(e){var t=this;this.axios.post("/delete_video",e).then(function(e){t.getQuery()}).catch(function(e){console.log(e.data)})},editor_video:function(e){this.form_video=e,this.dialog_video=!0},determine_user:function(){var e=this;this.axios.post("/edit_user",this.form).then(function(t){e.dialog=!1,e.getQuery()}).catch(function(e){console.log(e.data)})},determine_video:function(){var e=this;this.axios.post("/edit_video",this.form_video).then(function(t){e.dialog_video=!1,e.getQuery()}).catch(function(e){console.log(e.data)})}}},_={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-container",{staticClass:"fullscreen"},[o("el-aside",{attrs:{width:"200px"}},[o("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"calc(100vh - 0px)"},attrs:{"default-active":"1","background-color":"#080710","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[o("el-menu-item",{attrs:{index:"1"}},[o("i",{staticClass:"el-icon-menu"}),e._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("Manage member’s")])]),e._v(" "),o("el-menu-item",{attrs:{index:"2"}},[o("i",{staticClass:"el-icon-menu"}),e._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("Manage video library")])]),e._v(" "),o("el-menu-item",{attrs:{index:"3"}},[o("i",{staticClass:"el-icon-menu"}),e._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("  about graph display ")])]),e._v(" "),o("el-menu-item",{attrs:{index:"4"}},[o("i",{staticClass:"el-icon-menu"}),e._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("  View total revenue  ")])])],1)],1),e._v(" "),o("el-main",[o("div",{directives:[{name:"show",rawName:"v-show",value:e.user_table_show,expression:"user_table_show"}]},[o("el-table",{attrs:{data:e.user_tableData,"text-color":"#fff",height:"calc(100vh - 20px)",border:""}},[o("el-table-column",{attrs:{prop:"user_name",label:"user name"}}),e._v(" "),o("el-table-column",{attrs:{prop:"password",label:"password"}}),e._v(" "),o("el-table-column",{attrs:{prop:"user_type",label:"user type"}}),e._v(" "),o("el-table-column",{attrs:{prop:"user_nickname",label:"user nickname"}}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"operation",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.editor_user(t.row)}}},[e._v("editor")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.delete_row_user(t.row)}}},[e._v("delete")])]}}])})],1)],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.video_table_show,expression:"video_table_show"}]},[o("el-table",{staticStyle:{width:"100%"},attrs:{height:"calc(100vh - 20px)",border:"",data:e.video_tableData,"text-color":"#fff"}},[o("el-table-column",{attrs:{prop:"video_name",label:"video name"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_type",label:"video type"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_language",label:"language"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_length",label:"length"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_fps",label:"video_fps"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_clarity",label:"video_clarity"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_decoding_rate",label:"decod rate"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_description",label:"video description"}}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.editor_video(t.row)}}},[e._v("editor")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.delete_row_video(t.row)}}},[e._v("delete")])]}}])})],1)],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.graph_show,expression:"graph_show"}]},[o("div",{staticClass:"block"},[o("span",{staticClass:"demonstration"},[e._v("默认")]),e._v(" "),o("el-image",{attrs:{src:e.src1}})],1),e._v(" "),o("div",{staticClass:"block"},[o("span",{staticClass:"demonstration"},[e._v("默认")]),e._v(" "),o("el-image",{attrs:{src:e.src2}})],1)]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.revenue_table_show,expression:"revenue_table_show"}]},[o("div",{staticStyle:{color:"#ffffff","font-size":"50px"}},[e._v("\n          total revenue is : "+e._s(this.sum_num)+" rm\n        ")])])])],1),e._v(" "),o("el-drawer",{ref:"drawer",attrs:{title:"editor login",visible:e.dialog_user,direction:"ltr","custom-class":"demo-drawer"},on:{"update:visible":function(t){e.dialog_user=t}}},[o("div",{staticClass:"demo-drawer__content"},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"user name","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off",disabled:""},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"password","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"user type","label-width":e.formLabelWidth,disabled:""}},[o("el-select",{staticStyle:{width:"200px"},model:{value:e.form.user_type,callback:function(t){e.$set(e.form,"user_type",t)},expression:"form.user_type"}},[o("el-option",{attrs:{label:"user",value:"user"}}),e._v(" "),o("el-option",{attrs:{label:"admin",value:"admin"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"member grade","label-width":e.formLabelWidth}},[o("el-select",{staticStyle:{width:"200px"},model:{value:e.form.membership_grade,callback:function(t){e.$set(e.form,"membership_grade",t)},expression:"form.membership_grade"}},[o("el-option",{attrs:{label:"admin",value:"0"}}),e._v(" "),o("el-option",{attrs:{label:"1",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"2",value:"2"}}),e._v(" "),o("el-option",{attrs:{label:"3",value:"3"}})],1)],1)],1),e._v(" "),o("div",{staticClass:"demo-drawer__footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.determine_user}},[e._v("determine")])],1)],1)]),e._v(" "),o("el-drawer",{ref:"drawer",attrs:{title:"editor login",visible:e.dialog_video,direction:"ltr","custom-class":"demo-drawer"},on:{"update:visible":function(t){e.dialog_video=t}}},[o("div",{staticClass:"demo-drawer__content"},[o("el-form",{attrs:{model:e.form_video}},[o("el-form-item",{attrs:{label:"video_name","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:e.form_video.video_name,callback:function(t){e.$set(e.form_video,"video_name",t)},expression:"form_video.video_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"video_type","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:e.form_video.video_type,callback:function(t){e.$set(e.form_video,"video_type",t)},expression:"form_video.video_type"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"video_language","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:e.form_video.video_language,callback:function(t){e.$set(e.form_video,"video_language",t)},expression:"form_video.video_language"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"video_length","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:e.form_video.video_length,callback:function(t){e.$set(e.form_video,"video_length",t)},expression:"form_video.video_length"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"video_fps","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:e.form_video.video_fps,callback:function(t){e.$set(e.form_video,"video_fps",t)},expression:"form_video.video_fps"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"video_clarity","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:e.form_video.video_clarity,callback:function(t){e.$set(e.form_video,"video_clarity",t)},expression:"form_video.video_clarity"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"video_decoding_rate","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:e.form_video.video_decoding_rate,callback:function(t){e.$set(e.form_video,"video_decoding_rate",t)},expression:"form_video.video_decoding_rate"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"video_description","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:e.form_video.video_description,callback:function(t){e.$set(e.form_video,"video_description",t)},expression:"form_video.video_description"}})],1)],1),e._v(" "),o("div",{staticClass:"demo-drawer__footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.determine_video}},[e._v("determine")])],1)],1)])],1)},staticRenderFns:[]};var v=o("VU/8")(m,_,!1,function(e){o("Vmpn")},null,null).exports,p={name:"user",data:function(){return{history_tableData:[],video_tableData:[],form:{},history_show:!0,video_table_show:!1,multipleSelection:[]}},mounted:function(){this.getQuery()},methods:{checkVideo:function(){for(var e=0;e<this.$refs.multipleTable.selection.length;e++){var t={video_id:this.$refs.multipleTable.selection[e].id,video_income:null,users_name:this.form.user_name};1==this.form.membership_grade?t.video_income=this.$refs.multipleTable.selection[e].video_length/200:2==this.form.membership_grade?t.video_income=this.$refs.multipleTable.selection[e].video_length/300:3==this.form.membership_grade?t.video_income=this.$refs.multipleTable.selection[e].video_length/400:0==this.form.membership_grade&&(t.video_income=0),this.add_payment(t)}this.getQuery()},add_payment:function(e){this.axios.post("/add_payment",e).then(function(e){console.log(e.data)}).catch(function(e){console.log(e.data)})},handleSelectionChange:function(e){this.multipleSelection=e},handleSelect:function(e,t){1==e?(this.history_show=!0,this.video_table_show=!1):2==e&&(this.history_show=!1,this.video_table_show=!0)},getQuery:function(){var e=this;this.form=this.$cookies.get("user"),this.axios.post("/video_history",this.form).then(function(t){e.history_tableData=t.data}).catch(function(e){console.log(e.data)}),this.axios.post("/for_video",this.form).then(function(t){e.video_tableData=t.data}).catch(function(e){console.log(e.data)})}}},h={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-container",{staticClass:"fullscreen"},[o("el-aside",{attrs:{width:"200px"}},[o("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"calc(100vh - 0px)"},attrs:{"default-active":"1","background-color":"#080710","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[o("el-menu-item",{attrs:{index:"1"}},[o("i",{staticClass:"el-icon-menu"}),e._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("video history")])]),e._v(" "),o("el-menu-item",{attrs:{index:"2"}},[o("i",{staticClass:"el-icon-menu"}),e._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("recommended videos")])])],1)],1),e._v(" "),o("el-main",[o("div",{directives:[{name:"show",rawName:"v-show",value:e.history_show,expression:"history_show"}]},[o("el-table",{staticStyle:{width:"100%"},attrs:{height:"calc(100vh - 20px)",border:"",data:e.history_tableData}},[o("el-table-column",{attrs:{prop:"video_name",label:"video_name",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_type",label:"video_type",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_length",label:"video_length"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_language",label:"video_language"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_decoding_rate",label:"decoding_rate"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_clarity",label:"video_clarity"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_fps",label:"video_fps"}})],1)],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.video_table_show,expression:"video_table_show"}]},[o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{height:"calc(100vh - 80px)",border:"",data:e.video_tableData,"text-color":"#fff"},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_name",label:"video name"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_type",label:"video type"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_language",label:"language"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_length",label:"length"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_fps",label:"video_fps"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_clarity",label:"video_clarity"}}),e._v(" "),o("el-table-column",{attrs:{prop:"video_decoding_rate",label:"decod rate"}})],1),e._v(" "),o("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:e.checkVideo}},[e._v("payment")])],1)])],1)],1)},staticRenderFns:[]};var f=o("VU/8")(p,h,!1,function(e){o("+eDr")},null,null).exports;a.default.use(r.a);var b=new r.a({routes:[{path:"/",name:"index",component:c},{path:"/admin",name:"admin",component:v},{path:"/user",name:"user",component:f}]}),w=o("zL8q"),g=o.n(w),y=(o("tvR6"),o("ppUw")),x=o.n(y);a.default.use(x.a),a.default.config.productionTip=!1,a.default.use(g.a),a.default.prototype.axios=u.a,new a.default({el:"#app",router:b,components:{App:s},template:"<App/>"})},Vmpn:function(e,t){},it3O:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.de507b8a533d956ce846.js.map